!function(t,a,e){if("undefined"==typeof yith_wccl_general)return!1;var i=function(a,e,i){var r=!1,o=a.data("product_variations"),n=a.find(".variations select");settings=[],t.each(n,(function(){var a=t(this).data("attribute_name")||t(this).attr("name");i==a?settings[a]=e:""!==t(this).val()&&(settings[a]=t(this).val())}));for(var l=0;l<o.length;l++){var c=o[l];if(r)break;var s=settings;if(Object.keys(s).length>=1)for(var d in r=c,s)if(c.attributes.hasOwnProperty(d)){var _=c.attributes[d];_!=settings[d]&&""!=s[d]&&""!=_&&(r=!1)}}return r},r=function(i){i.preventDefault();var r=t(this),o=r.data("product_id"),n=r.data("quantity"),l=[],c={};t.each(r.data(),(function(t,a){c[t]=a})),i.data.select.each((function(t){l[t]=this.name+"="+this.value})),t(e.body).trigger("adding_to_cart",[r,c]),t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionAddCart),type:"POST",data:{action:yith_wccl_general.actionAddCart,product_id:o,variation_id:i.data.variation,attr:l.join("&"),quantity:n,context:"frontend"},beforeSend:function(){r.addClass("loading").removeClass("added")},success:function(i){i.error&&i.product_url?a.location=i.product_url:yith_wccl_general.cart_redirect?a.location=yith_wccl_general.cart_url:(r.removeClass("loading").addClass("added"),r.next(".added_to_cart").length||r.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),t(e.body).trigger("wc_fragment_refresh"),t(e).trigger("wc_update_cart"),t(e.body).trigger("added_to_cart",[i.fragments,i.cart_hash,r]))}})},o=function(t,a){a.closest("tr").find("th label").text(t)},n=function(t,a){this.$form=t,this.$attr="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):a,this.$select=this.$form.find(".variations select"),this.$use_ajax=!1===this.$form.data("product_variations"),this.$attr_number=this.$form.data("number-variation-attributes"),this.$is_loop=this.$form.hasClass("in_loop"),this.$wrapper=this.$form.closest(yith_wccl_general.wrapper_container_shop).length?this.$form.closest(yith_wccl_general.wrapper_container_shop):this.$form.closest(".product-add-to-cart"),this.$image=this.$wrapper.find(yith_wccl_general.image_selector).first(),this.$def_image_src=this.$image.data("lazy-src")?this.$image.data("lazy-src"):this.$image.attr("src"),this.$def_image_srcset=this.$image.data("lazy-srcset")?this.$image.data("lazy-srcset"):this.$image.attr("srcset"),this.$price_html=this.$wrapper.find(yith_wccl_general.wrapper_price_shop).clone().wrap("<p>").parent().html(),this.$button=this.$wrapper.find("a.add_to_cart_button"),this.$button_html=this.$button.html(),this.$input_qty=this.$wrapper.find("input.thumbnail-quantity"),this.$xhr=null,this.variations_gallery=[],void 0===this.$attr&&(this.$attr=[]),t.on("yith_wccl_form_initialized",{obj:this},this.init),this.$select.each((function(){this.setAttribute("data-default_value",this.value)})),this.resetForm(this),this.$is_loop&&t.parent().on("change",(function(t){t.stopPropagation()})),this.$input_qty.length&&this.$input_qty.hide(),this.$form.hasClass("initialized")||this.$form.addClass("initialized").fadeIn().trigger("yith_wccl_form_initialized")};n.prototype.styleOption=function(a,e,i,r){switch(/^(ftp|http|https):\/\/[^ "]+$/.test(r)&&"image"!==i&&(i="image"),i){case"colorpicker":1==(r=r.split(",")).length?(e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"></span></div>')),e.find(".yith_wccl_value").css({background:r})):(e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span></div>')),e.find(".yith-wccl-bicolor").css({"background-color":r[0],"border-color":r[1]}));break;case"image":e.append(t('<div class="yith_wccl_value_wrapper"><img class="yith_wccl_value"/></div>')),e.find(".yith_wccl_value").attr("src",r).attr("alt",i);break;case"label":e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"></span></div>')),e.find(".yith_wccl_value").text(r)}},n.prototype.addTooltip=function(a,e,i,r,o,n=""){var l=t('<span class="yith_wccl_tooltip"></span>'),c=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;!yith_wccl_general.tooltip||void 0===e||!e&&""===n||i.find(".yith_wccl_tooltip").length||("image"==r&&(e=e.toString().replace("{show_image}",'<img src="'+o+'" />')),""!==n&&(color_image='<img src="'+n+'" />',e=color_image+e.toString()),l.addClass(c),i.append(l.html('<span class="yith-wccl-tooltip-image">'+e+"</span>")))},n.prototype.handleSelect=function(a){var e=a.data.obj,r={};e.$select.each((function(){var a=t(this);r[this.name]=a.val()})),e.$select.each((function(){var a,n=t(this),l=e.$attr[this.name],c=decodeURIComponent(this.name),s=n.parent().find(".select_box"),d=[],_=n.closest("tr").find("th label").data("default-label");(a=n.closest(".select-wrapper")).length||(a=n.closest("td")).length||(a=n.parent()),void 0===l&&(l=e.$attr[c]),!yith_wccl_general.description||e.$is_loop||e.$wrapper.length||e.$form.find(".description_"+c).length||void 0===l||!l.descr||(n.closest("tr").length?n.closest("tr").after('<tr class="description_'+c+'"><td colspan="2">'+l.descr+"</td></tr>"):a.append('<p class="description_'+c+'">'+l.descr+"</p>"));var h=void 0!==l?l.type:n.data("type"),f=void 0!==l&&l.terms;if(a.addClass("yith_wccl_layout_"+yith_wccl_general.variation_layout),a.siblings(".label").addClass("yith_wccl_layout_"+yith_wccl_general.variation_layout),(e.$is_loop||void 0!==l&&l.terms)&&void 0!==h&&h){n.addClass("yith_wccl_custom").hide(),a.addClass("yith_wccl_is_custom"),s.length&&yith_wccl_general.grey_out||(s.remove(),s=t("<div />",{class:"select_box_"+h+" select_box "+n.attr("name")}).insertAfter(n)),n.find("option").each((function(){var a=t(this).val();if(f&&void 0!==f[a]||void 0!==t(this).data("value")&&""!==t(this).data("value")){d.push(a);var r=t(this),l="select_option_"+h+" select_option",p=f&&void 0!==f[a]?f[a].value:t(this).data("value"),g=f&&void 0!==f[a]?f[a].tooltip:t(this).data("tooltip"),m=f&&void 0!==f[a]?f[a].tooltip_image:t(this).data("tooltip_image"),u=s.find('[data-value="'+a+'"]'),v=f&&void 0!==f[a]?f[a].type:t(this).data("type");h=v||h,u.length||(a!=n.val()&&a!=n.attr("data-default_value")||(l+=" selected",yith_wccl_general.change_label_on_selected_attribute&&void 0!==_&&o(_+yith_wccl_general.attribute_separator+r[0].label,n)),(u=t("<div/>",{class:l,"data-value":a,"data-label":r[0].label,"data-tooltip_image":m,"data-attr_name":c}).appendTo(s)).off("click").on("click",(function(a){var l=t(this).hasClass("inactive"),c=t(this).hasClass("selected");if(l){var s=n.data("attribute_name")||n.attr("name");i(e.$form,t(this).data("value"),s)&&n.val("").change()}if(c)n.val("").change(),yith_wccl_general.change_label_on_selected_attribute&&o(_,n);else{n.val(r.val()).change();var d=t(this).data("label");yith_wccl_general.change_label_on_selected_attribute&&o(_+yith_wccl_general.attribute_separator+d,n)}t(this).toggleClass("selected"),t(this).siblings().removeClass("selected")})),e.styleOption(e,u,h,p),e.addTooltip(e,g,u,h,p,m))}}));var p=e.$form.data("product_variations");s.children().each((function(){var a=t(this).data("value")+"",i=t(this).closest(".yith_wccl_is_custom").find("select.yith_wccl_custom").attr("name");let o=Object.assign({},r);if("-1"==t.inArray(a,d)?t(this).addClass("yith-wccl-remove"):t(this).removeClass("yith-wccl-remove"),!e.$use_ajax)if(o[i]=a,!!e.findMatchingVariations(p,o).find((t=>!0===t.is_in_stock)))switch(t(this).removeClass("inactive"),yith_wccl_general.attribute_style){case"blur_cross":t(this).removeClass("inactive_cross");break;case"hide":t(this).removeClass("yith-wccl-remove")}else switch(t(this).addClass("inactive"),yith_wccl_general.attribute_style){case"blur_cross":t(this).addClass("inactive_cross");break;case"hide":t(this).addClass("yith-wccl-remove")}})),e.$form.trigger("yith_wccl_select_initialized",[n,l])}else n.on("change",(function(a){var e=t(this).closest("tr").find("th label").data("default-label"),i=t(this).val();i&&(e=e+yith_wccl_general.attribute_separator+i),yith_wccl_general.change_label_on_selected_attribute&&o(e,t(this))}))}))},n.prototype.setDefaultValue=function(a){var e=a.data.obj;e.$select.each((function(){t(this).val(t(this).attr("data-default_value"))})),e.$select.first().change()},n.prototype.changeLoopImage=function(t,a){if(a){var e=void 0!==a.image&&a.image.thumb_src?a.image.thumb_src:"",i=void 0!==a.image&&a.image.srcset?a.image.srcset:"";e&&e.length&&(t.$image.attr("src",e),t.$image.attr("data-lazy-src",e)),yith_wccl_general.set_srcset_on_loop_image&&i&&i.length&&t.$def_image_srcset&&(t.$image.attr("srcset",i),t.$image.attr("data-lazy-srcset",i))}else t.$image.attr("src",t.$def_image_src),t.$def_image_srcset&&t.$image.attr("srcset",t.$def_image_srcset)},n.prototype.changeSingleImage=function(t,a){var e=t.$form.closest(".product").find(".images").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=e.find(".wp-post-image"),r=e.find("a").eq(0);i.wc_set_variation_attr("src",a.image.src),i.wc_set_variation_attr("height",a.image.src_h),i.wc_set_variation_attr("width",a.image.src_w),i.wc_set_variation_attr("srcset",a.image.srcset),i.wc_set_variation_attr("sizes",a.image.sizes),i.wc_set_variation_attr("title",a.image.title),i.wc_set_variation_attr("alt",a.image.alt),i.wc_set_variation_attr("data-src",a.image.full_src),i.wc_set_variation_attr("data-large_image",a.image.full_src),i.wc_set_variation_attr("data-large_image_width",a.image.full_src_w),i.wc_set_variation_attr("data-large_image_height",a.image.full_src_h),e.wc_set_variation_attr("data-thumb",a.image.src),r.wc_set_variation_attr("href",a.image.full_src)},n.prototype.changeImageOnHover=function(a){var e=a.data.obj;yith_wccl_general.image_hover&&e.$form.on("mouseenter",".select_option",(function(){var a=t(this).attr("data-value"),r=t(this).attr("data-attr_name"),o=i(e.$form,a,r);(yith_wccl_general.image_hover_even_selected||!t(this).hasClass("selected")&&!t(this).siblings().hasClass("selected"))&&o&&(o.image&&o.image.src||o.image_src)&&(e.$form.hasClass("in_loop")?e.changeLoopImage(e,o):e.changeSingleImage(e,o))})).on("mouseleave",".select_option",(function(){var t=i(e.$form,"",!1);t&&(t.image&&t.image.src||t.image_src)?e.$form.hasClass("in_loop")?e.changeLoopImage(e,t):e.changeSingleImage(e,t):e.$form.hasClass("in_loop")?e.changeLoopImage(e,!1):e.$form.wc_variations_image_update(!1)}))},n.prototype.handleCheckVariations=function(t,a,e){var i=t.data.obj;if(!e){if(i.$found&&(t.data.obj.$found=!1,!i.$use_ajax))return;i.$changed&&(t.data.obj.$changed=!1,i.resetLoopForm(i))}},n.prototype.handleFoundVariation=function(a,i){var o=a.data.obj;if(o.$use_ajax?o.handleSelect(a):o.$select.last().trigger("focusin"),o.$is_loop){if(o.$changed&&o.resetLoopForm(o),a.data.obj.$changed=!0,a.data.obj.$found=!0,o.changeLoopImage(o,i),o.$select.length===o.$attr_number)i.is_purchasable&&(i.price_html&&o.$wrapper.find(yith_wccl_general.wrapper_price_shop).replaceWith(i.price_html),o.$input_qty.length&&o.$input_qty.show(),i.is_in_stock&&(o.$button.html(yith_wccl_general.add_cart),o.$button.off("click").on("click",{variation:i.variation_id,select:o.$select},r))),o.$wrapper.find(".variations_form").after(t(i.availability_html).addClass("ywccl_stock")),o.$form.data("active_variation",i.variation_id),t(e).trigger("ywccl_found_variation_in_loop",[i,o.$button,yith_wccl_general.add_cart]);else{let a=o.$form.find(".variations select"),e=[];t.each(a,(function(){var a=t(this).data("attribute_name")||t(this).attr("name");""!==t(this).val()&&(e[a]=t(this).val())}));var n=new URL(o.$button.attr("href"));for(var l in e){var c=e[l];c&&n.searchParams.set(l,c)}o.$button.attr("href",n)}}t(e).trigger("ywccl_after_found_variation",[i,o.$button,yith_wccl_general.add_cart])},n.prototype.handleVariationGallery=function(a,e){var i,r=a.data.obj,o=t(yith_wccl_general.single_gallery_selector);!r.$is_loop&&o.length&&(null!==r.$xhr&&r.$xhr.abort(),(i=void 0!==e?e.variation_id:r.$form.find('input[name="product_id"]').val())&&void 0!==i&&(void 0!==r.variations_gallery[i]?r.loadVariationGallery(r.variations_gallery[i],o,e):r.$xhr=t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionVariationGallery),data:{action:yith_wccl_general.actionVariationGallery,id:i,context:"frontend"},type:"POST",dataType:"html",beforeSend:function(){o.addClass("loading-gallery")},success:function(t){o.removeClass("loading-gallery"),r.$xhr=null,t&&(r.variations_gallery[i]=t,r.loadVariationGallery(t,o,e)),"function"==typeof initAvadaWoocommerProductGallery&&initAvadaWoocommerProductGallery()}})))},n.prototype.loadVariationGallery=function(a,i,r){i.replaceWith(a).fadeIn(),"undefined"!=typeof wc_single_product_params&&t(yith_wccl_general.single_gallery_selector).wc_product_gallery(wc_single_product_params),this.$form.wc_variations_image_update(r),t(e).trigger("yith_wccl_product_gallery_loaded"),t(e).trigger("uncode-quick-view-loaded"),t(e).trigger("wdReplaceMainGallery"),t(e).trigger("wdResetVariation"),"undefined"!=typeof woodmartThemeModule&&woodmartThemeModule.productImages()},n.prototype.resetLoopForm=function(a){a.changeLoopImage(a,!1),a.$wrapper.find(yith_wccl_general.wrapper_price_shop).replaceWith(a.$price_html),a.$wrapper.find(".ywccl_stock").remove(),a.$input_qty.length&&a.$input_qty.hide(),a.$button.html(a.$button_html).off("click",r).removeClass("added").next(".added_to_cart").remove(),a.$form.data("active_variation",""),t(e).trigger("yith_wccl_reset_loop_form",[a.$button])},n.prototype.resetForm=function(t){t.$form.find("div.select_option").removeClass("selected inactive"),t.$select.val("").change(),t.$form.trigger("reset_data")},n.prototype.onReset=function(t){t.data.obj.$form.find(".select_option.selected").removeClass("selected inactive")},n.prototype.onAddToCart=function(a){t(this).is(".wc-variation-selection-needed")&&a.data.obj.$select.each((function(){t(this).closest("tr").find("th").removeClass("yith-wccl-no-selected"),t(this).val()||t(this).closest("tr").find("th").addClass("yith-wccl-no-selected")}))},n.prototype.findMatchingVariations=function(t,a){for(var e=[],i=0;i<t.length;i++){var r=t[i];this.isMatch(r.attributes,a)&&e.push(r)}return e},n.prototype.isMatch=function(t,a){var e=!0;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=a[i];void 0!==r&&void 0!==o&&"string"==typeof o&&0!==r.length&&0!==o.length&&r!==o&&(e=!1)}return e},n.prototype.getChosenAttributes=function(a){var e={},i=0,r=0;if(!a.$use_ajax)return this.$select.each((function(){var a=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&r++,i++,e[a]=o})),{count:i,chosenCount:r,data:e}},n.prototype.onUpdateAttributes=function(a){var e=a.data.obj;if(!e.$use_ajax){var i=e.getChosenAttributes(e).data;e.$select.each((function(r,o){var n,l=t(o),c=l.data("attribute_name")||l.attr("name"),s=t(o).data("show_option_none"),d=":gt(0)",_=t("<select/>"),h=l.val()||"",f=!0;if(!l.data("attribute_html")){var p=l.clone();p.find("option").removeAttr("attached").prop("disabled",!1).prop("selected",!1),l.data("attribute_options",p.find("option"+d).get()),l.data("attribute_html",p.html())}_.html(l.data("attribute_html"));var g=t.extend(!0,{},i);g[c]="";var m=e.findMatchingVariations(a.data.obj.$form.data("product_variations"),g);for(var u in m)if(void 0!==m[u]){var v=m[u].attributes;for(var y in v)if(v.hasOwnProperty(y)){var w=v[y],$="";if(y===c)if(m[u].variation_is_active&&($="enabled"),w){w=t("<div/>").html(w).text();var b=_.find("option");if(b.length)for(var C=0,j=b.length;C<j;C++){var k=t(b[C]);if(w===k.val()){k.addClass("attached "+$);break}}}else _.find("option:gt(0)").addClass("attached "+$)}}n=_.find("option.attached").length,h&&(f=!1,0!==n&&_.find("option.attached.enabled").each((function(){var a=t(this).val();if(h===a)return f=!0,!1}))),n>0&&h&&f&&"no"===s&&(_.find("option:first").remove(),d=""),_.find("option"+d+":not(.attached)").remove(),l.html(_.html()),l.find("option"+d+":not(.enabled)").prop("disabled",!0),h?f?l.val(h):l.val("").trigger("change"):l.val("")})),e.$form.trigger("woocommerce_update_variation_values")}},n.prototype.init=function(a){var e=a.data.obj;e.$form.on("click.wc-variation-form",".reset_variations",{obj:e},e.onReset),e.$form.on("woocommerce_update_variation_values",{obj:e},e.handleSelect),e.$form.one("yith_wccl_select_initialized",{obj:e},e.changeImageOnHover),e.$form.on("check_variations",{obj:e},e.handleCheckVariations),e.$form.on("found_variation",{obj:e},e.handleFoundVariation),yith_wccl_general.enable_handle_variation_gallery&&(e.$form.on("found_variation",{obj:e},e.handleVariationGallery),e.$form.on("reset_image",{obj:e},e.handleVariationGallery)),e.$form.on("click",".single_add_to_cart_button",{obj:e},e.onAddToCart),e.$select.each((function(){if(!t(this).parents(".bundled_product").length){var a=t(this).attr("data-default_value");t(this).removeAttr("data-default_value"),t(this).val(a),t(this).closest("tr").find("th label").attr("data-default-label",t(this).closest("tr").find("th label").text())}})),e.$form.on("update_variation_values.wc-variation-form",{obj:e},e.onUpdateAttributes),e.handleSelect(a)},t.yith_wccl=function(a){forms=t(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===a&&(a=[]),forms.each((function(){new n(t(this),a)}))},t(e).on(yith_wccl_general.plugin_compatibility_selectors,(function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each((function(){t(this).wc_variation_form()})),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr))})),t(a).on("astWooCommerceAjaxPostsAdded facetwp-loaded",(function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(e).find(".variations_form:not(.initialized)").each((function(){t(this).wc_variation_form()})),t.yith_wccl([]))})),t("body").on("quick-view-displayed",(function(){var a=t(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");a&&t.yith_wccl(a)})),t(".shop-container > .products").on("append.infiniteScroll",(function(){t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each((function(){t(this).wc_variation_form()})),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr)})),t(e).on("yith_wccl_product_gallery_loaded",(function(){if("undefined"!=typeof mkdf&&"function"==typeof mkdf.modules.common.mkdfPrettyPhoto){var a=t(".mkdf-woo-single-page.mkdf-woo-single-has-pretty-photo .images .woocommerce-product-gallery__image");a.length&&(a.children("a").attr("data-rel","prettyPhoto[woo_single_pretty_photo]"),mkdf.modules.common.mkdfPrettyPhoto())}"undefined"!=typeof Flatsome&&(Flatsome.attach(t(".product-gallery")),t(".zoom-button").click((function(a){a.preventDefault(),t(".product-gallery-slider").find(".is-selected a").click()})))})),t(".single_add_to_cart_button").on("click",(function(a){if(t(this).is(".disabled")&&(a.preventDefault(),t(this).is(".wc-variation-selection-needed"))){return t(".variations_form.cart").find(".variations select").each((function(){t(this).closest("tr").find("th").removeClass("yith-wccl-no-selected"),t(this).closest("tr").find(".yith-wccl-no-selected-msg").remove(),t(this).val()||(t(this).closest("tr").find("th").addClass("yith-wccl-no-selected"),t(this).closest("td").append('<div class="yith-wccl-no-selected-msg"><small>'+yith_wccl_general.error_no_selected+"</small></div>"))})),!1}})),t(e).ready((function(){t.yith_wccl()}))}(jQuery,window,document);